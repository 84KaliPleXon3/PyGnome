<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PyGnome Reference &mdash; pyGNOME 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyGNOME 0.1.1 documentation" href="index.html" />
    <link rel="next" title="Units used in GNOME / PyGNOME" href="units.html" />
    <link rel="prev" title="CATS currents" href="tutorial_2.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="units.html" title="Units used in GNOME / PyGNOME"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial_2.html" title="CATS currents"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyGNOME 0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pygnome-reference">
<span id="reference"></span><h1>PyGnome Reference<a class="headerlink" href="#pygnome-reference" title="Permalink to this headline">¶</a></h1>
<p>PyGnomeis a wrapper around a set of C++ libraries. THe C++ code is designed to
be used by itself, or from Python, though using it in Python is easier. The API
is perhaps a bit klunky &#8211; the C++ code was all orginally written as part of a
monolithic GUI program &#8211; we have separated the GUI parts, and cleaned up the
API so that the pieces can be used individually.</p>
<div class="section" id="basic-structure">
<h2>Basic Structure<a class="headerlink" href="#basic-structure" title="Permalink to this headline">¶</a></h2>
<p>There are a handful of core base classes you need to use PyGnome for anything
useful:</p>
<ul>
<li><p class="first"><a class="reference external" href="reference.html#model">a model</a></p>
</li>
<li><dl class="first docutils">
<dt>movers:</dt>
<dd><p class="first last">These are classes that represent anything that moves a particle.  Or in fact,
alters a particle in any way (the name mover is a bit historical &#8211; they
used to only move particles...).  Examples include surface winds, currents
(from a variety of sources), weathering processes, etc. &#8211; this is where the
real work is done.  Each mover&#8217;s action is essentially linear superposed
with the others. i.e at each time step, the model loops through all the
movers, and passes the spill objects to be acted on.
At the C++ level, each mover has a <cite>get_move</cite> method that takes the current
time, model time step, and pointers to the arrays of particle properties it
needs.  At the Python level, the get_move method takes a spill object, and
the required arrays are extracted from the spill object &#8211; this lets us pass
to a mover only the data that it really needs, and lets us use Python for
the dynamic parts &#8211; making sure that the data needed exists.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>spills:</dt>
<dd><p class="first">A spill class is a class that holds a set of particles and various
information about them. Each of the particle properties are stored as numpy
arrays (in a dict) &#8211; so that for a given model setup, the spill only needs
to have the properties required, and the properties used by a given mover
(and only those) can be passed in as a C pointer to the mover code.  At the
very least, each spill has a set of particle position arrays.</p>
<p>There may be multiple spills in a model set-up, but for efficiency&#8217;s sake,
each spill usually is a set of 1000 or so particles that share various
properties.</p>
<p class="last">Each spill is a composition of the type of substance spilled (ElementType)
and how elements are released (instantaneous, continuous, etc).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>a map:</dt>
<dd><p class="first last">A map keeps track of where land and water are.  The simplest map is all the
earth with no land.  It has methods to ask if a location is on land, if a
location is &#8220;spillable&#8221;, etc.  The most commonly used map for surface oil
spills is intialized with a <cite>*.bna</cite> file describing polygons of land &#8211; this
is rasterized into a land-eater bitmap.  During the run, the model calls the
<cite>&#8216;beach_LEs</cite> method, which determines which particles have hit land in the
last time step, and sets those particles to &#8220;beached&#8221;.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="class-reference">
<h2>Class Reference:<a class="headerlink" href="#class-reference" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<div class="section" id="model">
<h1>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h1>
<p>This is the main class that contains objects used to model trajectory and
weathering processes. It runs the loop through time, etc.
The code comes with a full-featured version &#8211; you may want a simpler one if
you aren&#8217;t doing a full-on oil spill model. The model contains:</p>
<ul class="simple">
<li>map</li>
<li>collection of environment objects</li>
<li>collection of movers</li>
<li>collection of weatherers</li>
<li>a spills</li>
<li>its own attributes</li>
</ul>
<div class="section" id="model-loop">
<h2>model loop<a class="headerlink" href="#model-loop" title="Permalink to this headline">¶</a></h2>
<p>In pseudocode, the model loop is defined below. In the first step, it sets up the
model run and in subsequent steps the model moves and weathers elements.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">start_at_step_num</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="k">if</span> <span class="n">step_num</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">setup_model_run</span><span class="p">()</span>

<span class="k">else</span><span class="p">:</span>
    <span class="n">setup_time_step</span><span class="p">()</span>
    <span class="n">move</span><span class="p">()</span>
    <span class="n">weather</span><span class="p">()</span>
    <span class="n">step_is_done</span><span class="p">()</span>

<span class="n">step_num</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">sc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spills</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">release_elements</span><span class="p">()</span>     <span class="c"># initialize mover data arrays</span>

    <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weatherers</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">initialize_data</span><span class="p">()</span>     <span class="c"># initialize weatherer data arrays</span>

<span class="n">o</span> <span class="o">=</span> <span class="n">write_output</span><span class="p">()</span>

<span class="k">return</span> <span class="n">o</span>
</pre></div>
</div>
</div>
<div class="section" id="collection-of-environment-objects">
<h2>collection of environment objects<a class="headerlink" href="#collection-of-environment-objects" title="Permalink to this headline">¶</a></h2>
<p>The model&#8217;s environment attribute in an
<a class="reference external" href="reference.html#gnome.utilities.orderedcollection.OrderedCollection">OrderedCollection</a>
containing objects from gnome&#8217;s
<a class="reference external" href="reference.html#module-gnome.environment">environment</a> namespace</p>
</div>
<hr class="docutils" />
<div class="section" id="gnome-model-the-pygnome-model-class">
<h2><code class="docutils literal"><span class="pre">gnome.model</span></code> &#8211; the PyGnome model class<a class="headerlink" href="#gnome-model-the-pygnome-model-class" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-map-the-pygnome-map-class">
<h2><code class="docutils literal"><span class="pre">gnome.map</span></code> &#8211; the PyGnome map class<a class="headerlink" href="#gnome-map-the-pygnome-map-class" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-spill-classes-in-the-spill-module">
<h2><code class="docutils literal"><span class="pre">gnome.spill</span></code> &#8211; classes in the spill module<a class="headerlink" href="#gnome-spill-classes-in-the-spill-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-spill-elements-classes-in-the-elements-module">
<h2><code class="docutils literal"><span class="pre">gnome.spill.elements</span></code> &#8211; classes in the elements module<a class="headerlink" href="#gnome-spill-elements-classes-in-the-elements-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-movers-pygnome-mover-classes">
<h2><code class="docutils literal"><span class="pre">gnome.movers</span></code> &#8211; PyGnome mover classes<a class="headerlink" href="#gnome-movers-pygnome-mover-classes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-weatherers-pygnome-adios-weathering-mass-removal-classes">
<h2><code class="docutils literal"><span class="pre">gnome.weatherers</span></code> &#8211; PyGnome/Adios weathering/mass removal classes<a class="headerlink" href="#gnome-weatherers-pygnome-adios-weathering-mass-removal-classes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-environment-pygnome-environment-classes">
<h2><code class="docutils literal"><span class="pre">gnome.environment</span></code> &#8211; PyGnome environment classes<a class="headerlink" href="#gnome-environment-pygnome-environment-classes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-outputter-pygnome-outputters-module">
<h2><code class="docutils literal"><span class="pre">gnome.outputter</span></code> &#8211; PyGnome outputters module<a class="headerlink" href="#gnome-outputter-pygnome-outputters-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-utilities-pygnome-utilities-module">
<h2><code class="docutils literal"><span class="pre">gnome.utilities</span></code> &#8211; PyGnome utilities module<a class="headerlink" href="#gnome-utilities-pygnome-utilities-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="gnome-persist-pygnome-persistance-classes">
<h2><code class="docutils literal"><span class="pre">gnome.persist</span></code> &#8211; PyGnome persistance classes<a class="headerlink" href="#gnome-persist-pygnome-persistance-classes" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PyGnome Reference</a><ul>
<li><a class="reference internal" href="#basic-structure">Basic Structure</a></li>
<li><a class="reference internal" href="#class-reference">Class Reference:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model">Model</a><ul>
<li><a class="reference internal" href="#model-loop">model loop</a></li>
<li><a class="reference internal" href="#collection-of-environment-objects">collection of environment objects</a></li>
<li><a class="reference internal" href="#gnome-model-the-pygnome-model-class"><code class="docutils literal"><span class="pre">gnome.model</span></code> &#8211; the PyGnome model class</a></li>
<li><a class="reference internal" href="#gnome-map-the-pygnome-map-class"><code class="docutils literal"><span class="pre">gnome.map</span></code> &#8211; the PyGnome map class</a></li>
<li><a class="reference internal" href="#gnome-spill-classes-in-the-spill-module"><code class="docutils literal"><span class="pre">gnome.spill</span></code> &#8211; classes in the spill module</a></li>
<li><a class="reference internal" href="#gnome-spill-elements-classes-in-the-elements-module"><code class="docutils literal"><span class="pre">gnome.spill.elements</span></code> &#8211; classes in the elements module</a></li>
<li><a class="reference internal" href="#gnome-movers-pygnome-mover-classes"><code class="docutils literal"><span class="pre">gnome.movers</span></code> &#8211; PyGnome mover classes</a></li>
<li><a class="reference internal" href="#gnome-weatherers-pygnome-adios-weathering-mass-removal-classes"><code class="docutils literal"><span class="pre">gnome.weatherers</span></code> &#8211; PyGnome/Adios weathering/mass removal classes</a></li>
<li><a class="reference internal" href="#gnome-environment-pygnome-environment-classes"><code class="docutils literal"><span class="pre">gnome.environment</span></code> &#8211; PyGnome environment classes</a></li>
<li><a class="reference internal" href="#gnome-outputter-pygnome-outputters-module"><code class="docutils literal"><span class="pre">gnome.outputter</span></code> &#8211; PyGnome outputters module</a></li>
<li><a class="reference internal" href="#gnome-utilities-pygnome-utilities-module"><code class="docutils literal"><span class="pre">gnome.utilities</span></code> &#8211; PyGnome utilities module</a></li>
<li><a class="reference internal" href="#gnome-persist-pygnome-persistance-classes"><code class="docutils literal"><span class="pre">gnome.persist</span></code> &#8211; PyGnome persistance classes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial_2.html"
                        title="previous chapter">CATS currents</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="units.html"
                        title="next chapter">Units used in GNOME / PyGNOME</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/reference.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="units.html" title="Units used in GNOME / PyGNOME"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial_2.html" title="CATS currents"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyGNOME 0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2012, NOAA Emergecny Response Division.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>